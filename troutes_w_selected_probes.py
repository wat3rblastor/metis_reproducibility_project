import requests
import json
import random
import time

url = 'http://caitlyn.cs.northwestern.edu/ripeline/schedule'
ripebaseurl = 'https://atlas.ripe.net/api/v2/'

addresses = ["google.pt", "sapo.pt", "santander.pt", "idealista.pt", "xl.pt", "bancobpi.pt", "record.pt", "bitdefender.pt", "impresa.pt", "iol.pt"]

headers = { 'Content-Type': 'application/json' } 

potential_probes = [51190,1003030,61151,60983,33827,21242,1002996,1001845,54806,61910,
    1001843,1001712,12162,2234,52343,1000347,61083,1003019,1002374,1001922,
    6328,55042,1001928,1001934,1001933,1001930,12219,1001981,1000430,1000423,
    1004465,1000434,1004466,1000426,1006807,25438,3178,1001847,1002995,1006806,
    1002233,1002403,33293,1002401,1002891,1001728,1001997,1001731,1009106,1009857,
    1008676,1001290,1003031,22311,1003032,1003003,1005355,6677,1004057,1003029,1003848,
    21580,12983,50631,1001992,1001852,25598,1000431,1000357,1000438,53533,1003026,1003005,
    1001849,1002992,52516,1002991,1001333,1002997,803,1002483,1002994,1004381,1001720,1003002,
    1003015,1003028,1001842,1001291,1000424,1000422,54947,16100,6667,62771,1000043,1006188,53560,
    1003037,53026,1003036,1009183,1001840,22868,1001837,2489,16054,1003016,1000905,1001709,1001831,
    65190,1001708,53089,53963,1003009,1001702,1010208,1001827,1001015,1007550,3169,54701,50701,53990,
    28580,1002054,1006867,1000907,1005509,1001828,64051,61488,53661,32126,28492,3131,27102,1009113,62651,
    50669,54690,1001264,53839,1001690,53504,1001905,1004102,55757,1001908,1004560,1002598,1001858,1001018,
    1010251,1001903,1001047,1003011,1003001,60986,1001294,54843,1001020,18113,1001067,1001337,1001066,32131,
    50483,1004118,54938,50252,1001271]

x = 100

addresses_and_probes = [{"address": address, "probes": random.sample(potential_probes, x)} for address in addresses]

headers = {

	'Content-Type': 'application/json'

}

data = { 'type': 'traceroute', 'addresses_and_probes': addresses_and_probes, 'description': 'random 100 of snapshot (1) to umbrella top pt domains', 'userid': 'bspinrad' }

response = requests.post(url, data=json.dumps(data), headers=headers)
print('Status code:', response.status_code)
print('Response body:', response.json())